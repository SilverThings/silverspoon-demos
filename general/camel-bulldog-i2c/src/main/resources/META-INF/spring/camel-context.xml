<?xml version="1.0" encoding="utf-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
          http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
          http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">
   <camelContext xmlns="http://camel.apache.org/schema/spring">
      <route>
         <from uri="jetty:http://${sensor.host}:${sensor.port}/pca9685/reset"/>
         <!-- PCA9685 init -->
         <transform><simple>00a1</simple></transform><to uri="bulldog:i2c?address=0x40"/>
         <transform><simple>0104</simple></transform><to uri="bulldog:i2c?address=0x40"/>
         <transform><simple>fc0010</simple></transform><to uri="bulldog:i2c?address=0x40"/>
      </route>
      <route>
         <from uri="jetty:http://${sensor.host}:${sensor.port}/pca9685/alloff"/>
         <!-- turn all LEDs off -->
         <transform><simple>fc0010</simple></transform><to uri="bulldog:i2c?address=0x40"/>
      </route>
      <route>
         <from uri="jetty:http://${sensor.host}:${sensor.port}/pca9685/led1/on"/>
         <!-- turn LED1 on (full brightness) -->
         <transform><simple>0A0000ff0f</simple></transform><to uri="bulldog:i2c?address=0x40"/>
      </route>
      <route>
         <from uri="jetty:http://${sensor.host}:${sensor.port}/pca9685/led1/off"/>
         <!-- turn LED1 off -->
         <transform><simple>0A00000000</simple></transform><to uri="bulldog:i2c?address=0x40"/>
      </route>
      <route>
         <from uri="jetty:http://${sensor.host}:${sensor.port}/pca9685/led1/set"/>
         <!-- set LED1's brightness -->
         <transform><simple>0A0000${bodyAs(String)}</simple></transform><to uri="bulldog:i2c?address=0x40"/>
      </route>
   </camelContext>
</beans>
